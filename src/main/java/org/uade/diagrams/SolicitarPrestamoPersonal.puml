@startuml
actor Cliente
participant "PrestamoController" as PC
participant "ClienteController" as CC
participant "Cliente" as C
participant "CajaAhorro" as CA
participant "Prestamo: PrestamoPersonal" as P

Cliente -> PC: solicitarPrestamoPersonal(SolicitarPrestamoDTO p): int
activate PC

PC -> CC: getCliente(int dni): Cliente
activate CC

loop Por cada cliente
    CC -> C: getDni(): int
    activate C
    opt dni coincide
        CC <-- C: cliente
    end
    deactivate C
end

CC --> PC: cliente encontrado
deactivate CC

opt plazo es mayor a 12 y menor a 120
    PC -> C: getCaja(): CajaAhorro
    activate C
    C --> PC: caja de ahorro encontrada
    deactivate C

    PC -> P: crear Prestamo Personal (double monto, int plazo, double tasa, Cliente cliente)
    activate P
    PC <-- P: prestamo Personal creado
    deactivate P

    PC -> CA: agregarSaldo(float saldo)
    activate CA
    CA --> PC: true
    deactivate CA
end

PC --> Cliente: Prestamo confirmado
deactivate PC
@enduml